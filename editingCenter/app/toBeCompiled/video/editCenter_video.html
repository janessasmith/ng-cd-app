<form name="videoForm" novalidate>
    <div class="row_news  websiteOrIwo_timeLine_head_row_news plr20 pb46">
        <ul class="subject-tab">
            <li>
                <a du-smooth-scroll du-scrollspy offset="40" duration="2000" href="#section-1">列表信息</a>
            </li>
            <li>
                <a du-smooth-scroll du-scrollspy offset="60" duration="2000" href="#section-3">属性信息</a>
            </li>
            <li>
                <a du-smooth-scroll du-scrollspy offset="60" duration="2000" href="#section-4">发稿单</a>
            </li>
            <li ng-if="status.hasVersionTime">
                <a du-smooth-scroll du-scrollspy duration="2000" offset="60" href="#section-5">流程版本</a>
            </li>
        </ul>
        <div class="web-attr-info" id="section-1">
            <div class="ht43"></div>
            <div class="edit-news-title">
                列表信息
            </div>
            <div class="clearfix">
                <div class="row subject-list-style">
                    <div class="col-md-1 pr0 txt_r edit-news-listStyleDiv padfixed">
                        <p>列表样式：</p>
                    </div>
                    <div class="col-md-11 edit-news-listStyleBody">
                        <div class="style-radio" ng-repeat="listStyle in data.listStyle">
                            <trs-single-radio label="{{listStyle.desc}}" group="'listStyle'" ischecked="listStyle.value==list.LISTSTYLE" callback="list.LISTSTYLE = listStyle.value"></trs-single-radio>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-11 subject-list-style col-md-push-1">
                        <div class="news_input_check invalidate-input-box {{videoForm.ListTitle.$invalid?'has-error':''}}">
                            <input class="form-control list -w233" type="text" name="ListTitle" ng-model="list.LISTTITLE" placeholder="请输入标题" maxlength-error-message="长度不能超过100个字符！" validator="spechar,maxlength=100,required" ng-blur="showError(true)" ng-mouseenter="isShowTipsA=true" ng-mouseleave="isShowTipsA=false" is-show-tips="isShowTipsA">
                        </div>
                        <span class="star-red">*</span>
                        <div class="list-style-img h120">
                            <div class="fa_upload invalidate-input-box {{videoForm.listStyleOne.$invalid?'has-error':''}}" ng-if="list.LISTSTYLE==0||list.LISTSTYLE==1">
                                <trs-upload-full ng-if="status.pictureSize" file-name="list.LISTPICS[0].APPFILE" directCropper picturesize="{{status.pictureSize.LISTPICSSIZE}}" file-desc="list.LISTPICS[0].APPDESC " return-file="list.LISTPICS[0].PERPICURL " callback="deleteUploaderImg('LISTPICS',0)"></trs-upload-full>
                                <input type="text" class="ueditorReplace" validator="spechar,required" name="listStyleOne" ng-model="list.LISTPICS[0].APPFILE" ng-mouseenter="isShowTipsB=true" ng-mouseleave="isShowTipsB=false" is-show-tips="isShowTipsB" />
                            </div>
                            <div class="fa_upload invalidate-input-box {{videoForm.listStyleOne.$invalid?'has-error':''}}" ng-if="list.LISTSTYLE==3">
                                <trs-upload-full ng-if="status.pictureSize" file-name="list.LISTPICS[0].APPFILE" directCropper picturesize="{{status.pictureSize.LISTBIGPICSIZE}}" file-desc="list.LISTPICS[0].APPDESC " return-file="list.LISTPICS[0].PERPICURL " callback="deleteUploaderImg('LISTPICS',0)"></trs-upload-full>
                                <input type="text" class="ueditorReplace" validator="spechar,required" name="listStyleOne" ng-model="list.LISTPICS[0].APPFILE" ng-mouseenter="isShowTipsB=true" ng-mouseleave="isShowTipsB=false" is-show-tips="isShowTipsB" />
                            </div>
                            <div class="fa_upload invalidate-input-box {{videoForm.listStyleTwo.$invalid? 'has-error': ''}}" ng-if="list.LISTSTYLE==1">
                                <trs-upload-full ng-if="status.pictureSize" file-name="list.LISTPICS[1].APPFILE" directCropper picturesize="{{status.pictureSize.LISTPICSSIZE}}" file-desc="list.LISTPICS[1].APPDESC " return-file="list.LISTPICS[1].PERPICURL " callback="deleteUploaderImg('LISTPICS',1) "></trs-upload-full>
                                <input type="text" class="ueditorReplace" validator="spechar,required" name="listStyleTwo" ng-model="list.LISTPICS[1].APPFILE" ng-mouseenter="isShowTipsC=true" ng-mouseleave="isShowTipsC=false" is-show-tips="isShowTipsC" />
                            </div>
                            <div class="fa_upload invalidate-input-box {{videoForm.listStyleThree.$invalid? 'has-error': ''}} " ng-if="list.LISTSTYLE==1">
                                <trs-upload-full ng-if="status.pictureSize" file-name="list.LISTPICS[2].APPFILE" directCropper picturesize="{{status.pictureSize.LISTPICSSIZE}}" file-desc="list.LISTPICS[2].APPDESC" return-file="list.LISTPICS[2].PERPICURL " callback="deleteUploaderImg('LISTPICS',2) "></trs-upload-full>
                                <input type="text" class="ueditorReplace" validator="spechar,required" name="listStyleThree" ng-model="list.LISTPICS[2].APPFILE" ng-mouseenter="isShowTipsD=true" ng-mouseleave="isShowTipsD=false" is-show-tips="isShowTipsD" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row edit-news-lable">
                    <div class="col-md-1 pr0 txt_r edit-news-lable-title">
                        <p>标签：</p>
                    </div>
                    <div class="col-md-11 subject-list-style web-list-info-con edit-news-lable-body">
                        <div class="list-style-tab " ng-model="list.LABEL " bs-radio-group>
                            <label ng-repeat="tabName in data.label " class="btn btn-default " ng-click="list.LABEL=tabName.value " ng-class="{ 'selected':list.LABEL==tabName.value} ">{{tabName.value}}</label>
                        </div>
                    </div>
                </div>
                <div class="subject-list-style">
                    <div class="col-md-1 pr0 txt_r edit-news-focusImage padfixed">
                        <p>焦点图：</p>
                    </div>
                    <div class="col-md-11 edit-news-focusImageDiv">
                        <div class="list-style-check">
                            <trs-checkbox ischecked="list.ISFOCUSIMAGE==0" callback="updateCKSelection('ISFOCUSIMAGE')"></trs-checkbox>栏目焦点图
                        </div>
                    </div>
                    <div ng-if="list.ISFOCUSIMAGE==0" class="focusDiv">
                        <div class="list-style-img row">
                            <div class="left fa_div mt10">
                                <div class="news_input_check invalidate-input-box">
                                    <input trs-spe-char class="form-control list-text fz12" type="text" name="FocusImage" ng-model="list.FOCUSIMGTITLE" placeholder="请输入标题" maxlength-error-message="长度不能超过100个字符 " validator="spechar,maxlength=100,required" ng-mouseenter="isShowTipsE=true" ng-mouseleave="isShowTipsE=false " is-show-tips="isShowTipsE">
                                </div>
                                <span class="star-red">*</span>
                            </div>
                            <div class="fa_upload invalidate-input-box {{videoForm.isFoucesImage.$invalid? 'has-error': ''}}">
                                <trs-upload-full ng-if="status.pictureSize" file-name="list.FOCUSIMAGE[0].APPFILE" directCropper picturesize="{{status.pictureSize.FOCUSIMAGESIZE}}" return-file="list.FOCUSIMAGE[0].PERPICURL" file-desc="list.FOCUSIMAGE[0].APPDESC" callback="deleteUploaderImg('FOCUSIMAGE',0)"></trs-upload-full>
                                <input type="text" class="ueditorReplace" validator="spechar,required" name="isFoucesImage" ng-model="list.FOCUSIMAGE[0].APPFILE" ng-mouseenter="isShowTipsF=true" ng-mouseleave="isShowTipsF=false" is-show-tips="isShowTipsF" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt15" id="section-3">
            <div class="edit-news-title">
                属性信息
            </div>
            <div class="m_box bg-gray">
                <div class="m_box_item">
                    <div class="col-sm-1 txt_r">新闻来源：</div>
                    <div class="col-sm-11 invalidate-input-box {{videoForm.NewsSources.$invalid&&videoForm.NewsSources.$dirty?'has-error':''}}">
                        <input type="text" name="NewsSources" ng-model="list.NEWSSOURCES" class="form-control edit-news-attribute-text" maxlength-error-message="长度不能超过100个字符" validator="spechar,maxlength=100" placeholder="请输入新闻来源" ng-mouseenter="isShowTipsX=true" ng-mouseleave="isShowTipsX=false" is-show-tips="isShowTipsX">
                    </div>
                </div>
                <div class="m_box_item">
                    <div class="col-sm-1 txt_r">署名作者：</div>
                    <div class="col-sm-11 invalidate-input-box {{videoForm.SignatureAuthor.$invalid&&videoForm.SignatureAuthor.$dirty?'has-error':''}}">
                        <input type="text" name="SignatureAuthor" ng-model="list.SIGNATUREAUTHOR" class="form-control edit-news-attribute-text" maxlength-error-message="长度不能超过100个字符！" validator="spechar,maxlength=100" placeholder="请输入署名作者" ng-mouseenter="isShowTipsS=true" ng-mouseleave="isShowTipsS=false" is-show-tips="isShowTipsS">
                    </div>
                </div>
                <div class="m_box_item mt20">
                    <div class="col-sm-1 txt_r">
                        关键词：
                    </div>
                    <div class="col-sm-10">
                        <span class="errorTips" ng-show="isShowKeywordTips"><p class="validation-invalid">{{keywordsTips}}</p><i></i></span>
                        <div class="edit-news-attribute-text pull-left iwo-keywords-input-lengthen">
                            <tags-input ng-model="data.KEYWORDS" ng-blur="leave()" text="KEYWORDTEXT" add-on-space="true" add-on-enter="false" add-on-blur="true" ng-mouseenter="enter()" ng-mouseleave="leave()" add-on-comma="false" add-on-paste="true" paste-split-pattern="[;]" replace-spaces-with-dashes="false" enable-editing-last-tag="true" spellcheck="false" display-property="name" template="tag-template" min-length="1" max-length="20" placeholder="请输入关键词，以空格完成输入" allowed-tags-pattern="^[^<>\/]*$" on-invalid-tag="invalidTag($tag)" on-tag-adding="checkTag($tag)">
                            </tags-input>
                        </div>
                        <!-- <button ng-click="getKeywordsOrAbstract('keywords')" class="iwo-get-keywords iwo_get_keywords_btn">提取关键词</button> -->
                        <button ng-click="clearAllKeywords()" class="iwo-get-keywords iwo_get_keywords_btn">清除所有关键词</button>
                        <script type="text/ng-template" id="tag-template">
                            <div style="float: left; padding-left: 2px">
                                <span>{{$getDisplayText()}}</span>
                                <a class="remove-button" ng-click="$removeTag()">&times;</a>
                            </div>
                        </script>
                    </div>
                </div>
                <div class="m_box_item">
                    <div class="col-sm-1 txt_r">摘要：</div>
                    <div class="col-sm-7 invalidate-input-box {{videoForm.Abstract.$invalid&&videoForm.Abstract.$dirty?'has-error':''}}">
                        <textarea ng-model="list.CONABSTRACT" name="Abstract" class="form-control edit-news-textarea" maxlength-error-message="长度不能超过500个字符！" validator="spechar,maxlength=500" ng-mouseenter="isShowTipsZ=true" ng-mouseleave="isShowTipsZ=false" is-show-tips="isShowTipsZ"></textarea>
                    </div>
                    <!-- <button ng-click="getKeywordsOrAbstract('abstract')" class="iwo-get-iabstract iwo_get_iabstract_btn">提取摘要</button> -->
                    <div class="col-sm-2 mt140">
                        <!-- <a href="">提取摘要</a> -->
                    </div>
                </div>
                <div class="m_box_item websiteaudiovideo">
                    <div class="col-sm-1 txt_r">音频视频：</div>
                    <div class="col-sm-11 invalidate-input-box">
                        <ul class="audiovideo">
                            <li ng-init="getAudioVideoPlayer(item)" ng-repeat="item in status.audioVideoidsArray">
                                <video ng-if="item.value.streamsMap.l!=undefined" controls="controls" ng-src="{{item.value.streamsMap.l.httpURL}}"></video>
                                <div ng-if="item.value.err!=undefined" class="default">
                                    <span><img src="./editingCenter/website/images/video.gif" alt="请稍等，正在转码..."></span>
                                </div>
                                <div class="toolbar">
                                    <label ng-click="deleteAudioVideo(item)">删除</label>
                                    <label ng-click="downloadAudioVideo(item.id)" ng-if="item.value.streamsMap.l.httpURL!=undefined">下载</label>
                                </div>
                            </li>
                            <li class="edit-UploadMasProgress" ng-if="status.uploadMasNow">
                                <div>
                                    <p ng-style="{'width':status.uploadMasProgress}"></p>
                                </div>
                                <span ng-bind="status.uploadMasProgress"></span>
                            </li>
                        </ul>
                        <div>
                            <div class="edit-UploadMasBtn" trs-Mas-upload call-back="uploadMasCallBack" extensions="status.masUploadExtensions" mime-types="status.masUploadMimeTypes" multiple="false">
                            </div>
                            <p class="cue"><span>支持格式：</span>
                                <span>.mp3,.mp4,.flv,.rmvb,.avi</span></p>
                        </div>
                    </div>
                </div>
                <div class="m_box_item">
                    <div class="col-sm-1 txt_r">音视频地址：</div>
                    <div class="col-sm-11 invalidate-input-box">
                        <input type="text" name="videoUrl" placeholder="http://开头" ng-model="list.AUDIOVIDEOURL" validator="maxlength=500,url" ng-mouseenter="isShowTipsV=true" ng-mouseleave="isShowTipsV=false" is-show-tips="isShowTipsV" class="form-control w352 left">
                        <p class="cue" style="float: left; margin: 0px 0px 0px 10px;line-height: 33px;"><span>支持格式：</span>
                            <span>.mp4,.flv,.rmvb,.avi</span></p>
                    </div>
                </div>
                <div class="subject-list-style">
                    <div class="m_box_item">
                        <div class="col-sm-1 txt_r">
                            <div class="txt-style">题图：</div>
                        </div>
                        <div class="col-sm-1">
                            <div class="checkbox">
                                <trs-checkbox ischecked="list.ISSELECTFIGURE==1" callback="updateCKSelection('ISSELECTFIGURE')"></trs-checkbox>题图
                            </div>
                        </div>
                        <div class="list-style-img" ng-if="list.ISSELECTFIGURE==1">
                            <div class="fa_upload form-control {{videoForm.isselectfigure.$invalid? 'has-error': ''}}">
                                <trs-upload-full ng-if="status.pictureSize" file-name="list.FIGURE[0].APPFILE" directCropper picturesize="{{status.pictureSize.FIGURESIZE}}" file-desc="list.FIGURE[0].APPDESC" return-file="list.FIGURE[0].PERPICURL" callback="deleteUploaderImg('FIGURE',0)"></trs-upload-full>
                            </div>
                            <input type="text" class="ueditorReplace" validator="spechar,required" name="isselectfigure" ng-model="list.FIGURE[0].APPFILE" />
                        </div>
                    </div>
                </div>
                <div class="m_box_item">
                    <div class="col-sm-1 txt_r lh40">评论设置：</div>
                    <div class="col-sm-10 mt10">
                        <div class="style-radio left" ng-repeat="commentset in data.commentSet">
                            <trs-single-radio label="{{commentset.desc}}" group="'commentset'" ischecked="commentset.value==list.COMMENTSET" callback="list.COMMENTSET=commentset.value"></trs-single-radio>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mtb20" id="section-4">
            <div class="mtb20">
                <div class="edit-news-title blueborder">
                    <p class="pull-left">发稿单</p>
                    <label class="edit-news-checkbox">
                        <trs-checkbox ischecked="list.ISNOPAYMENT==1" callback="updateCKSelection('ISNOPAYMENT')"></trs-checkbox>不发稿费
                    </label>
                </div>
                <div class="m_box_item mt20 ml15">
                    稿件体裁：
                    <trs-single-select selected-option="list.DOCGENRE" options="data.docGenre"></trs-single-select>
                </div>
            </div>
            <editor></editor>
        </div>
        <div ng-if="status.hasVersionTime">
            <div class="subject-title mt20" id="section-5">流程版本</div>
            <tabset class="m_nav_3 mt20">
                <tab heading="操作日志">
                    <div class="m_box_2">
                        <trs-timeline title="'操作日志'">
                            <p ng-bind="data.version.operationLogTitle" class="logTitle"></p>
                            <div ng-repeat="(key, value) in data.version.group">
                                <h3 ng-class="{'operateLog':$index%2==0}">{{key}}</h3>
                                <timegroup tick="item.day" ng-repeat="item in data.version.operationLog[key]">
                                    <timeitem tick="n.value.CRTIME" ng-repeat="n in item.times">
                                        <a class="minw45">{{n.value.OPERATION}}</a>
                                        <a class="minw80 pointer" ng-bind="n.value.USERNAME" title="{{n.value.OPERUSERNAME}}"></a>
                                        <a class="minw88" title="{{n.value.ATTRIBUTE}}" ng-bind="n.value.DESUSERNAME||n.value.ATTRIBUTE"></a>
                                        <a title="{{n.value.OPINION}}" class="exttype" ng-if="n.value.OPINION!==''">{{n.value.OPERATION}}意见</a>
                                    </timeitem>
                                </timegroup>
                            </div>
                        </trs-timeline>
                    </div>
                    <div class="websist_normal w100pen" ng-if="page.CURRPAGE>=page.PAGECOUNT">没有更多了...
                    </div>
                    <div data-ng-if="page.CURRPAGE<page.PAGECOUNT" cg-busy="loadingPromise" class="website_timeline_load_more_2 text-center w100pen" ng-click="getLoadMore()">
                        <img src="./editingCenter/website/images/images/newTab_2.png" /> 点击展开更多
                    </div>
                </tab>
                <tab heading="流程版本">
                    <div class="m_box_2">
                        <trs-timeline title="'流程版本'">
                            <timegroup tick="item.day" ng-repeat="item in data.version.versionTime">
                                <timeitem tick="n.value.CRTIME" ng-repeat="n in item.times">
                                    <a class="minw45">{{n.value.OPERATION}}</a>
                                    <a class="minw80" title="{{n.value.OPERSTATEDESC|trsLimitTo:12}}">{{n.value.OPERSTATEDESC}}</a>
                                    <a class="minw88">{{n.value.CRUSER}}</a>
                                    <a class="exttype" target="_blank" ui-sref="editingCenterPersonalVersionTime({objectversionid:n.value.OBJECTVERSIONID})">{{n.value.EXTTYPE}}</a>
                                </timeitem>
                            </timegroup>
                        </trs-timeline>
                    </div>
                </tab>
            </tabset>
        </div>
    </div>
    <div class="Iw-box-fix box-fix-bt">
        <div class="txt_r">
            <button class="btn btn-primary btn-app" ng-click="save()" ng-disabled="!status.openBtn" ng-hide="status.platformType=='app.yiqianfa'">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/bsave.png" />
                </span>保存
            </button>
            <button ng-if="status.btnRights['app.daibian.songshen']" class="btn btn-primary btn-app" ng-click="appTrial()" ng-disabled="!status.openBtn" ng-show="status.platformType=='app.daibian'">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/b52.png" />
                </span>送审
            </button>
            <button ng-if="status.btnRights['app.daishen.tuigao']" class="btn btn-primary btn-app" ng-click="appRevoke()" ng-disabled="!status.openBtn" ng-show="status.platformType=='app.daishen'">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/b83.png" />
                </span>撤稿
            </button>
            <button class="btn btn-primary btn-app" ng-click="appSignDirect()" ng-disabled="!status.openBtn" ng-show="status.platformType=='app.yiqianfa'">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/b53.2.png" />
                </span>保存并发布
            </button>
            <button ng-if="status.btnRights['app.daibian.qianfa']||status.btnRights['app.daishen.qianfa']" class="btn btn-primary btn-app" ng-click="appSignDirect()" ng-disabled="!status.openBtn" ng-hide="status.platformType=='app.yiqianfa'">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/b53.1.png" />
                </span>直接签发
            </button>
            <button ng-if="status.btnRights['app.daibian.qianfa']||status.btnRights['app.daishen.qianfa']" class="btn btn-primary btn-app" ng-click="appSignTiming()" ng-disabled="!status.openBtn" ng-hide="status.platformType=='app.yiqianfa'">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/b53.2.png" />
                </span>定时签发
            </button>
            <button class="btn btn-primary btn-app" ng-click="appPreview()" ng-disabled="!status.openBtn">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/b57.png" />
                </span>保存并预览
            </button>
            <button class="btn btn-primary btn-app" ng-click="close()" ng-disabled="!status.openBtn">
                <span class="s_icon s_icon_app">
                    <img ng-src="./editingCenter/website/images/bclose.png" />
                </span>关闭
            </button>
        </div>
    </div>
</form>
